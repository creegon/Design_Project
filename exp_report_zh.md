# 参数混合实验报告（2025-10-31 13:53:23）

## 实验概览
- **实验类型**：参数混合 (`parameter_mixing`)
- **提示词**：`The future of artificial intelligence is`
- **参数组合**：16 组（γ ∈ {0.10, 0.2667, 0.4333, 0.60} × δ ∈ {1.0, 1.6667, 2.3333, 3.0}）
- **文本片段**：16 段，全部生成成功

## 关键指标（按检测器 γ）
| γ | 平均 Z-score | 检测率 | 平均绿色比例 |
|----|-------------|--------|---------------|
| 0.10 | 5.11 | 100% | 16.20% |
| 0.2667 | 5.86 | 100% | 37.15% |
| 0.4333 | 5.90 | 100% | 55.16% |
| 0.60 | 3.58 | 0% | 67.10% |

## 观察与分析
1. 中低 γ（≤0.4333）配合 δ≥1.5 时稳定输出 ≥5σ 的水印信号。
2. γ=0.60 虽然绿色比例最高，但 Z-score 只有 3.58，需要更长文本或更高 δ 才能过阈值。
3. 为比较 δ 的边际收益，建议在保存结果时补充每个组合的单独检测统计。

## 建议与结论
- 后续部署可优先使用 γ≈0.25~0.45、δ≥1.5 的组合，兼顾信号强度与文本质量。
- 若需要更高绿色比例，可将 γ 提升到 0.60，同时拉长生成内容或降低检测阈值。

---

# Piggyback 攻击实验报告（2025-11-01 01:45:16）

## 实验概况
- **实验类型**：鲁棒性“搭便车”攻击（piggyback attack）
- **模型/参数**：llama-3.2-3b，gamma=0.5，delta=2.0，hash_key=15485863
- **提示词**：默认历史时间轴提示词，易生成年份与数量级描述

## 检测指标
| 阶段 | z-score | 判定 | 绿色比例 |
|------|---------|------|-----------|
| 原始文本 | 5.92 | 阳性 | 75.00% |
| 攻击后文本 | 5.99 | 阳性 | 73.89% |

> 攻击后 z-score 反而略升，说明在加入伪造信息后水印仍保持高置信度通过。

## 攻击操作
1. **插入句子**：`Explicitly, historical archives claim some of these figures were widely disputed.`
2. **直接替换**：`70 → 700`、`1945 → 1445`、`first → last`
3. **失败替换**（被水印拒绝）：`fast → slow`、`faster → slower`、`thousand → hundred`

## 观察
- 年份与数量级的放大替换成功混入（如 1945→1445、70→700），同时原有水印判定依旧为阳性，验证了“搭便车”攻击可以在不触发检测的前提下改写关键信息。
- 插入的争议句强化了文本的虚假叙述，但并未显著降低水印 z-score——鲁棒水印在此场景下无法阻止伪造。
- 较大语义差异的替换（fast→slow 等）被拒绝，说明水印仍对大幅语义翻转有一定敏感度。

## 结论
该实验展示了 piggyback 攻击的现实操作路径：通过少量插入与定向数字/词汇替换即可把带水印文本伪装成包含错误年份与统计数字的版本，同时维持检测“阳性”。日志已保存于 `watermark_attack/watermark_attack_results/piggyback_attack_20251101_014516.json`，可作为漏洞复现依据。

# 种子混合实验报告（2025-10-31 13:41:09）

## 实验概览
- **实验类型**：种子混合 (`seed_mixing`)
- **提示词**：`Write a short story about robots:`
- **变体数量**：5（仅更换 hash_key）
- **混合文本**：顺序拼接 5 个变体

## 自身密钥检测
| 变体 | Hash Key | Z-score | 结论 |
|------|----------|---------|------|
| 1 | 15485863 | 10.49 | ✓ |
| 2 | 16485863 | 7.19 | ✓ |
| 3 | 17485863 | 3.86 | ✗ |
| 4 | 18485863 | 7.89 | ✓ |
| 5 | 19485863 | 7.84 | ✓ |

## 交叉密钥观察
- 正确密钥始终给出最高 Z-score，错误密钥保持在负值或 0 附近。
- 变体 3 因文本较短仅获得 3.86σ，可通过延长生成内容解决。

## 结论
统一提示词仅替换 hash_key 仍可维持高置信度的自检信号，且跨密钥误检概率低，是验证密钥区分度的有效方法。

---

# 跨模型共享密钥实验报告（2025-10-31 14:12:37）

## 实验概览
- **实验类型**：跨模型共享密钥 (`cross_model_key_sharing`)
- **模型链路**：llama-3.2-3b → llama-3.1-8b → llama-3.2-3b（续写）
- **共享参数**：γ=0.5，δ=2.0，hash_key=12345
- **续接策略**：取前一段末尾 20 tokens 作为下一模型提示词

## 检测结果
- 混合文本：z=6.92，p≈2.28×10⁻¹²，绿色比例≈76.3%，成功检出水印。
- 各模型片段在共享密钥下均保持较高 z-score，说明水印信号在不同模型间可以累积。

## 结论
共享密钥适用于多模型协作场景，可在保证检测成功率的同时提高绿色 token 占比。

---

# 跨模型独立密钥实验报告（2025-10-31 14:43:53）

## 实验概览
- **实验类型**：跨模型独立密钥 (`cross_model_distinct_keys`)
- **模型顺序**：llama-3.2-3b → llama-3.1-8b → llama-3.2-1b
- **密钥配置**：13579 / 24680 / 97531
- **生成设置**：每段 120 tokens，续接窗口 20 tokens，γ=0.5，δ=2.0

## 合成文本检测
| 密钥 | Z-score | 结论 | 绿色比例 |
|------|---------|------|-----------|
| 13579 | 3.45 | ✗ | 60.44% |
| 24680 | 1.15 | ✗ | 53.48% |
| 97531 | 0.54 | ✗ | 51.65% |

> 合成文本中各密钥信号互相稀释，但片段级检测仍能区分。

## 片段交叉检测
| 片段 | 模型 | 正确密钥 Z | 最高错误 Z |
|------|------|-------------|-------------|
| 1 | llama-3.2-3b | **5.08** | -0.53 |
| 2 | llama-3.1-8b | 3.24 | 0.52 |
| 3 | llama-3.2-1b | 3.16 | 0.63 |

## 结论
正确密钥在对应片段上始终取得最高 Z-score，错误密钥保持低值；延长文本或提高 δ 可进一步将所有片段推到 4σ 以上。结果保存于 `hybrid_watermark_results/cross_model_distinct_keys_20251031_144353.json`。

---

# 系统性统计评估报告（2025-10-31 15:45:47）

## 实验概览
- **实验类型**：统计评估（滑动窗口 + 窗口敏感性 + 最小长度）
- **提示词**：`The impact of artificial intelligence`
- **水印参数**：γ=0.5，δ=2.0，hash_key=15485863
- **文本样本**：水印 vs. 对照各 500 tokens

## 滑动窗口（窗口 100，步长 100）
- 窗口数 17，平均 z-score 4.08，标准差 1.35
- 检测成功率 ≈70.6%，平均绿色比例 ≈72.4%

## 窗口敏感性
| 窗口 | 平均 Z | 检测率 |
|------|--------|--------|
| 25 | 2.09 | 17.5% |
| 50 | 3.00 | 52.6% |
| 75 | 3.66 | 58.3% |
| 100 | 4.10 | 66.7% |
| 150 | 5.23 | 80.0% |
| 200 | 5.47 | 100% |

- 最优窗口 ≈200 tokens：检测率 100%，z≈5.47。

## 最小长度
- 测试范围 20–240 tokens（步长 10），首次稳定成功 50 tokens
- 50 tokens 及以上共 18 种长度全部成功

## 结论
1. 100-token 滑动窗口已足够显著，必要时可拉长窗口或串联多个窗口以提高稳健性。
2. 150–200 tokens 是兼顾分辨率与信号强度的推荐范围。
3. 约 50 tokens（35–40 个词）即可稳定检出水印，为部署提供了文本长度下限。结果保存于 `hybrid_watermark_results/complete_statistical_eval_20251031_154547.json`。

---


